<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <link th:href="@{/css/style.css}" rel="styleSheet">
    <script th:src="@{/js/main.js}"></script>
    <title>ユーザー編集画面</title>
</head>
<body>
    <header class="header-contents">
        <div class="header">
            <div>
                <a th:href="@{/admin/show}">戻る</a>
            </div>
        </div>
    </header>
    <main class="registration-main">
        <h2 class="user-registration-title">ユーザー編集</h2>
        <div class="registration-user">
            <form class="user-registration-form" th:method="put" th:action="@{/admin/update/{id}(id=${formModel.id})}" th:object="${formModel}">
                <!-- CSRFトークン -->
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <!-- エラーメッセージ -->
                <div class="registration-error">
                    <div th:if="${#fields.hasErrors('account')}" th:errors="*{account}"></div>
                    <div th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
                    <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
                    <div th:if="${#fields.hasErrors('departmentId')}" th:errors="*{departmentId}"></div>
                    <div th:if="${#fields.hasErrors('authority')}" th:errors="*{authority}"></div>
                    <div th:if="${#fields.hasErrors('workStart')}" th:errors="*{workStart}"></div>
                    <div th:if="${#fields.hasErrors('workEnd')}" th:errors="*{workEnd}"></div>
                    <div th:if="${#fields.hasErrors('restStart')}" th:errors="*{restStart}"></div>
                    <div th:if="${#fields.hasErrors('restEnd')}" th:errors="*{restEnd}"></div>
                </div>
                <!--入力フォーム-->
                <p>
                <label class="floatLabel">社員番号(編集不可)</label>
                <input readonly type="text" th:field="*{account}">
                </p>
                <p>
                <label class="floatLabel">パスワード(記号を含む半角6文字以上20文字以下)</label>
                <input type="password" th:field="*{password}">
                </p>
                <p>
                <label class="floatLabel">確認用パスワード</label>
                <input type="password" name="confirmationPassword" th:value="${confirmationPassword}">
                </p>
                <p>
                <label class="floatLabel">氏名(10文字以下)</label>
                <input type="text" th:field="*{name}">
                </p>
                <p>
                <select class="classic" th:classappend="${loginUser.id == formModel.id} ? 'my-own' : '' " th:field="*{departmentId}">
                    <option value="" selected>部署を選択</option>
                    <option th:if="${loginUser.id == formModel.id}" value="1">人事部(編集不可)</option>
                    <option th:if="${loginUser.id == formModel.id}" value="2">営業部(編集不可)</option>
                    <option th:if="${loginUser.id == formModel.id}" value="3">技術部(編集不可)</option>
                    <option th:unless="${loginUser.id == formModel.id}" value="1">人事部</option>
                    <option th:unless="${loginUser.id == formModel.id}" value="2">営業部</option>
                    <option th:unless="${loginUser.id == formModel.id}" value="3">技術部</option>
                </select>
                </p>
                <p>
                <select class="classic" th:classappend="${loginUser.id == formModel.id} ? 'my-own' : ''"  th:field="*{authority}">
                    <option value="" selected>権限を選択</option>
                    <option th:if="${loginUser.id == formModel.id}" value="0">承認者(編集不可)</option>
                    <option th:if="${loginUser.id == formModel.id}" value="1">一般(編集不可)</option>
                    <option th:unless="${loginUser.id == formModel.id}" value="0">承認者</option>
                    <option th:unless="${loginUser.id == formModel.id}" value="1">一般</option>
                </select>
                </p>
                <div class="time-container">
                    <div class="time">
                        <label class="time-label">勤務開始</label>
                        <input class="time-input" type="time" name="workStart" th:value="${#temporals.format(formModel.workStart, 'HH:mm')}">
                    </div>
                    <div class="time">
                        <label class="time-label">勤務終了</label>
                        <input class="time-input" type="time" th:field="*{workEnd}">
                    </div>
                </div>

                <div class="time-container">
                    <div class="time">
                        <label class="time-label">休憩開始</label>
                        <input class="time-input" type="time" th:field="*{restStart}">
                    </div>
                    <div class="time">
                        <label class="time-label">休憩終了</label>
                        <input class="time-input" type="time" th:field="*{restEnd}">
                    </div>
                </div>

                <p>
                <input type="submit" value="更新">
                </p>
            </form>
        </div>
    </main>
</body>
</html>